# 2024-12-05 Limiter Test Report

## Purpose

Evaluate performance of various RF limiter circuits intended to protect LNAs or other sensitive RF components from 30 kHz to 6 GHz.

The PCBs were manufactured by JLCPCB. The design is here (commit 7b1c7f8 used for manufacturing): https://github.com/greatscottgadgets/misc/tree/master/evaluation-boards/limiters


## BAR9002ELSE6327XTSA1/JDH2S02SL,L3F PIN-Schottky

![VNA screenshot of BAR9002ELSE6327XTSA1/JDH2S02SL,L3F limiter at 0 dBm](BAR9002ELSE6327XTSA1-JDH2S02SL,L3F-0dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/JDH2S02SL,L3F limiter, 0 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/JDH2S02SL,L3F limiter at 12 dBm](BAR9002ELSE6327XTSA1-JDH2S02SL,L3F-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/JDH2S02SL,L3F limiter, 12 dBm input*

</figcaption>


## BAR9002ELSE6327XTSA1/NSR201MXT5G PIN-Schottky

![VNA screenshot of BAR9002ELSE6327XTSA1/NSR201MXT5G limiter at 0 dBm](BAR9002ELSE6327XTSA1-NSR201MXT5G-0dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/NSR201MXT5G limiter, 0 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/NSR201MXT5G limiter at 12 dBm](BAR9002ELSE6327XTSA1-NSR201MXT5G-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/NSR201MXT5G limiter, 12 dBm input*

</figcaption>


## BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 PIN-Schottky

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 limiter at 0 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-0dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 limiter, 0 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 limiter at 12 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 limiter, 12 dBm input*

</figcaption>


## BAR6302LE6327XTMA1/BAT1502LSE6433XTMA1 PIN-Schottky

![VNA screenshot of BAR6302LE6327XTMA1/BAT1502LSE6433XTMA1 limiter at 0 dBm](BAR6302LE6327XTMA1-BAT1502LSE6433XTMA1-0dBm.jpg)
<figcaption>

*BAR6302LE6327XTMA1/BAT1502LSE6433XTMA1 limiter, 0 dBm input*

</figcaption>

![VNA screenshot of BAR6302LE6327XTMA1/BAT1502LSE6433XTMA1 limiter at 12 dBm](BAR6302LE6327XTMA1-BAT1502LSE6433XTMA1-12dBm.jpg)
<figcaption>

*BAR6302LE6327XTMA1/BAT1502LSE6433XTMA1 limiter, 12 dBm input*

</figcaption>


## SMP1321-040LF/BAT1502LSE6433XTMA1 PIN-Schottky

![VNA screenshot of SMP1321-040LF/BAT1502LSE6433XTMA1 limiter at 0 dBm](SMP1321-040LF-BAT1502LSE6433XTMA1-0dBm.jpg)
<figcaption>

*SMP1321-040LF/BAT1502LSE6433XTMA1 limiter, 0 dBm input*

</figcaption>

![VNA screenshot of SMP1321-040LF/BAT1502LSE6433XTMA1 limiter at 12 dBm](SMP1321-040LF-BAT1502LSE6433XTMA1-12dBm.jpg)
<figcaption>

*SMP1321-040LF/BAT1502LSE6433XTMA1 limiter, 12 dBm input*

</figcaption>


## SMP1345-040LF/BAT1502LSE6433XTMA1 PIN-Schottky

![VNA screenshot of SMP1345-040LF/BAT1502LSE6433XTMA1 limiter at 0 dBm](SMP1345-040LF-BAT1502LSE6433XTMA1-0dBm.jpg)
<figcaption>

*SMP1345-040LF/BAT1502LSE6433XTMA1 limiter, 0 dBm input*

</figcaption>

![VNA screenshot of SMP1345-040LF/BAT1502LSE6433XTMA1 limiter at 12 dBm](SMP1345-040LF-BAT1502LSE6433XTMA1-12dBm.jpg)
<figcaption>

*SMP1345-040LF/BAT1502LSE6433XTMA1 limiter, 12 dBm input*

</figcaption>


## SMP1330-040LF/BAT1502LSE6433XTMA1 PIN-Schottky

![VNA screenshot of SMP1330-040LF/BAT1502LSE6433XTMA1 limiter at 0 dBm](SMP1330-040LF-BAT1502LSE6433XTMA1-0dBm.jpg)
<figcaption>

*SMP1330-040LF/BAT1502LSE6433XTMA1 limiter, 0 dBm input*

</figcaption>

![VNA screenshot of SMP1330-040LF/BAT1502LSE6433XTMA1 limiter at 12 dBm](SMP1330-040LF-BAT1502LSE6433XTMA1-12dBm.jpg)
<figcaption>

*SMP1330-040LF/BAT1502LSE6433XTMA1 limiter, 12 dBm input*

</figcaption>


## NSVP249SDSF3T1G PIN-PIN

![VNA screenshot of NSVP249SDSF3T1G limiter at 0 dBm](NSVP249SDSF3T1G-0dBm.jpg)
<figcaption>

*NSVP249SDSF3T1G limiter, 0 dBm input*

</figcaption>

![VNA screenshot of NSVP249SDSF3T1G limiter at 12 dBm](NSVP249SDSF3T1G-12dBm.jpg)
<figcaption>

*NSVP249SDSF3T1G limiter, 12 dBm input*

</figcaption>


## SMP1304-005LF PIN-PIN

![VNA screenshot of SMP1304-005LF limiter at 0 dBm](SMP1304-005LF-0dBm.jpg)
<figcaption>

*SMP1304-005LF limiter, 0 dBm input*

</figcaption>

![VNA screenshot of SMP1304-005LF limiter at 12 dBm](SMP1304-005LF-12dBm.jpg)
<figcaption>

*SMP1304-005LF limiter, 12 dBm input*

</figcaption>


## BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 PIN-Schottky with ground resistor

I assembled a variation of a PIN-Schottky limiter. Instead of connecting the PIN diode directly to ground, I connected it through a 1 uF capacitor. I installed a resistor in parallel with the capacitor. First I tried a 0 ohm resistor and confirmed that the result was the same as reported above for the BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 PIN-Schottky limiter. Then I tried other resistances.

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 limiter with 1k resistor at 12 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-1k-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 limiter, 1k ground resistor, 12 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 limiter with 100 ohm resistor at 12 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-100-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 limiter, 100 ohm ground resistor, 12 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 limiter with 12 ohm resistor at 12 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-12-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 limiter, 12 ohm ground resistor, 12 dBm input*

</figcaption>
 
## BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 Biased PIN-Schottky
 
I added a 36 ohm resistor to a DC power supply, forming a voltage divider with the 12 ohm resistor.

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 biased limiter with 3.3 V at -30 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-36-12-3V3-n30dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 biased limiter, 3.3 V, -30 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 biased limiter with 3.3 V at 0 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-36-12-3V3-0dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 biased limiter, 3.3 V, 0 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 biased limiter with 3.3 V at 12 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-36-12-3V3-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 biased limiter, 3.3 V, 12 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 biased limiter with 2.0 V at 0 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-36-12-2V0-0dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 biased limiter, 2.0 V, 0 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 biased limiter with 2.0 V at 12 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-36-12-2V0-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 biased limiter, 2.0 V, 12 dBm input*

</figcaption>
 

## SMP1330-040LF/BAT1502LSE6433XTMA1 Biased PIN-Schottky
 
I replaced the PIN diode with SMP1330-040LF.

![VNA screenshot of SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter with 0 V at 0 dBm](SMP1330-040LF-BAT1502LSE6433XTMA1-36-12-0V-0dBm.jpg)
<figcaption>

*SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter, 0 V, 0 dBm input*

</figcaption>

![VNA screenshot of SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter with 0 V at 12 dBm](SMP1330-040LF-BAT1502LSE6433XTMA1-36-12-0V-12dBm.jpg)
<figcaption>

*SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter, 0 V, 12 dBm input*

</figcaption>

![VNA screenshot of SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter with 2.0 V at 0 dBm](SMP1330-040LF-BAT1502LSE6433XTMA1-36-12-2V0-0dBm.jpg)
<figcaption>

*SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter, 2.0 V, 0 dBm input*

</figcaption>

![VNA screenshot of SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter with 2.0 V at 12 dBm](SMP1330-040LF-BAT1502LSE6433XTMA1-36-12-2V0-12dBm.jpg)
<figcaption>

*SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter, 2.0 V, 12 dBm input*

</figcaption>

![VNA screenshot of SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter with 3.3 V at 0 dBm](SMP1330-040LF-BAT1502LSE6433XTMA1-36-12-3V3-0dBm.jpg)
<figcaption>

*SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter, 3.3 V, 0 dBm input*

</figcaption>

![VNA screenshot of SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter with 3.3 V at 12 dBm](SMP1330-040LF-BAT1502LSE6433XTMA1-36-12-3V3-12dBm.jpg)
<figcaption>

*SMP1330-040LF/BAT1502LSE6433XTMA1 biased limiter, 3.3 V, 12 dBm input*

</figcaption>

 
## BAR9002ELSE6327XTSA1 Biased PIN
 
I assembled a biased PIN limiter with the PIN shunted directly to ground. The bias voltage was divided by a 10k over 10k voltage divider and then fed into the RF path with a choke consisting of LQP03TN33NJ02D and LSQPA201616T101M inductors in series. The insertion loss peak at 500 MHz was due to the RF choke arrangement.

![VNA screenshot of BAR9002ELSE6327XTSA1 biased limiter with 0 V at 0 dBm](BAR9002ELSE6327XTSA1-0V-0dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1 biased limiter, 0 V, 0 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1 biased limiter with 0 V at 12 dBm](BAR9002ELSE6327XTSA1-0V-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1 biased limiter, 0 V, 12 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1 biased limiter with 2.0 V at 0 dBm](BAR9002ELSE6327XTSA1-2V0-0dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1 biased limiter, 2.0 V, 0 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1 biased limiter with 2.0 V at 12 dBm](BAR9002ELSE6327XTSA1-2V0-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1 biased limiter, 2.0 V, 12 dBm input*

</figcaption>


## BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 Active PIN-Schottky

I assembled an active PIN-Schottky limiter using PIN diode BAR9002ELSE6327XTSA1 and Schottky diode BAT1502LSE6433XTMA1 and connected a 3.3 V power supply. This circuit (see connector J53 in the PCB design) uses the Schottky diode as a detector, activating forward bias of the PIN diode when RF power exceeds a threshold.

![VNA screenshot of active PIN-Schottky limiter with 0 V at 0 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-active-0V-0dBm.jpg)
<figcaption>

*Active PIN-Schottky limiter, 0 V supply, 0 dBm input*

</figcaption>

![VNA screenshot of active PIN-Schottky limiter with 0 V at 10 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-active-0V-10dBm.jpg)
<figcaption>

*Active PIN-Schottky limiter, 0 V supply, 10 dBm input*

</figcaption>

![VNA screenshot of active PIN-Schottky limiter with 3.3 V at 0 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-active-3V3-0dBm.jpg)
<figcaption>

*Active PIN-Schottky limiter, 3.3 V supply, 0 dBm input*

</figcaption>

![VNA screenshot of active PIN-Schottky limiter with 3.3 V at 10 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-active-3V3-10dBm.jpg)
<figcaption>

*Active PIN-Schottky limiter, 3.3 V supply, 10 dBm input*

</figcaption>


## BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 Switched PIN-Schottky

I assembled a PIN-Schottky limiter with BAR9002ELSE6327XTSA1 and BAT1502LSE6433XTMA1. Instead of connecting the Schottky directly to ground, I connected it to ground through an N-channel MOSFET. I installed a 1 uF capacitor in parallel with the MOSFET.

The return loss at high frequencies was likely due to bodges.

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 switched limiter off at 0 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-switched-off-0dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 switched limiter, off, 0 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 switched limiter off at 12 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-switched-off-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 switched limiter, off, 12 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 switched limiter on at 0 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-switched-on-0dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 switched limiter, on, 0 dBm input*

</figcaption>

![VNA screenshot of BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 switched limiter on at 12 dBm](BAR9002ELSE6327XTSA1-BAT1502LSE6433XTMA1-switched-on-12dBm.jpg)
<figcaption>

*BAR9002ELSE6327XTSA1/BAT1502LSE6433XTMA1 switched limiter, on, 12 dBm input*

</figcaption>


## BAT1502LSE6433XTMA1 Schottky Detector

I assembled a Schottky detector with an RF choke consisting of LQP03TN33NJ02D and LSQPA201616T101M inductors in series. The Schottky was connected to ground through a 1 uF capacitor. A resistor was placed in parallel to the capacitor. The insertion loss peak at 500 MHz was due to the RF choke arrangement. I used an oscilloscope to observe the voltage across the resistor.

With 1k resistor I observed peak voltage of 210 mV at 0 dBm and 725 mV at 10 dBm.

With 680k resistor I observed peak voltage of 304 mV at 0 dBm and 1.0 V at 10 dBm.

![VNA screenshot of BAT1502LSE6433XTMA1 detector at 0 dBm](BAT1502LSE6433XTMA1-detector-0dBm.jpg)
<figcaption>

*BAT1502LSE6433XTMA1 detector, 0 dBm input*

</figcaption>

I later replaced the Schottky with JDH2S02SL,L3F and tested a few fixed frequencies at 10 dBm. I observed 931 mV at 6 GHz, 901 mV at 1 MHz, and 657 mV at 30 kHz.



## Conclusions

The PIN-Schottky combination of BAR9002ELSE6327XTSA1 and BAT1502LSE6433XTMA1 performed quite well, similar to BAR9002ELSE6327XTSA1/BAT2402LSE6327XTSA1 [previously tested](../2022-04-24-limiter-test/README.md#bar9002else6327xtsa1bat2402lse6327xtsa1). Disabling the limiter with a MOSFET between the Schottky and ground was effective.

Biased PIN limiters, including the active PIN-Schottky limiter, had mixed results, generally performing poorly at very high and very low frequencies. This appears to be at least partly due to the particular characteristics of the PIN diode. It would be worth trying PIN diodes with longer charge carrier lifetime.

Dual-PIN packages had low insertion loss in a PIN-PIN limiter configuration with ground plane cutouts and inductor, but their power thresholds were high as expected.

Schottky detection worked quite well. It should be possible to use the detection signal to control an RF switch IC instead of using a discrete PIN diode.
